# ===================== APP & SERVER =====================
spring.application.name=MusicOnline
server.port=8088
spring.jackson.time-zone=Asia/Ho_Chi_Minh
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
server.forward-headers-strategy=framework

# ===================== DATASOURCE =====================
spring.datasource.url=jdbc:mysql://localhost:3308/musiconldb?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Ho_Chi_Minh&characterEncoding=utf8
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:}

# Hibernate
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true
spring.jpa.open-in-view=false
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# ===================== STATIC/LINKS =====================
base_url=http://localhost:8088/
images_url=http://localhost:8088/assets/images/
musics_url=http://localhost:8088/assets/musics/
artist_images=http://localhost:8088/assets/artist_images/
playlist_images=http://localhost:8088/assets/playlist_images/

# ===================== MAIL (Gmail TLS) =====================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=phucnguyen220704@gmail.com
spring.mail.password=qgrx yzsj zmzg shfo
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# ===================== PAYPAL (Sandbox) =====================
paypal.mode=sandbox
paypal.posturl=https://www.sandbox.paypal.com/cgi-bin/webscr
paypal.business=${PAYPAL_BUSINESS_EMAIL}
paypal.client-id=${PAYPAL_CLIENT_ID}
paypal.client-secret=${PAYPAL_CLIENT_SECRET}
paypal.returnurl=http://localhost:8088/movie/paypal-success
paypal.cancelurl=http://localhost:8088/movie/select-seats?showtimeId={showtimeId}

# ===================== JWT (khớp JWTServiceImpl đã sửa) =====================
# Tạo secret base64 dài >= 32 bytes sau khi decode (vd: `openssl rand -base64 48`)
jwt.secret=Vn0KQ0Xy0xJ1b7d2z8s9q3p5r7u9w1y2A3B4C5D6E7F8G9H0I1J2K3L4M5N6O7P8
jwt.secret.base64=true
jwt.expiry=604800000
jwt.issuer=cinema-app
jwt.clockSkewSeconds=60

# ===================== LOGGING (tùy chọn) =====================
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.orm.jdbc.bind=TRACE

tmdb.api.key=bf83f909115287b8b4573867e1a1c6ce

# Tăng giới hạn file upload
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# ===================== AUDIO STORAGE =====================
app.audio.storage-path=./audio-storage/
app.audio.enable-download=true

# ===================== RESOURCE HANDLING =====================
spring.web.resources.static-locations=classpath:/static/,classpath:/public/,file:${app.audio.storage-path}

# Cấu hình RestTemplate timeout
rest-template.read-timeout=30000
rest-template.connection-timeout=10000

# Logging để debug
logging.level.com.example.demo.services.AudioStorageService=DEBUG
logging.level.com.example.demo.controllers.AudioController=INFO
logging.level.com.example.demo.services.MusicImportService=DEBUG
