# ===================== APP & SERVER =====================
spring.application.name=MusicOnline
server.port=8088
spring.jackson.time-zone=Asia/Ho_Chi_Minh
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
server.forward-headers-strategy=framework

# ===================== DATASOURCE =====================
spring.datasource.url=jdbc:mysql://localhost:3308/musiconldb?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Ho_Chi_Minh&characterEncoding=utf8
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:}

# ===================== JPA/HIBERNATE =====================
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Tắt lazy load ngoài transaction (tránh LazyInitializationException)
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=false
spring.jpa.open-in-view=false

# ===================== STATIC RESOURCES & URL PREFIX =====================
# Dùng @Value("${app.base-url}") trong code
app.base-url=${BASE_URL:http://localhost:8088}

# ===================== UPLOAD PATH (CHỈ LƯU VÀO TARGET) =====================
# Lưu vào target/classes/static → Spring Boot phục vụ trực tiếp
app.upload.artist-dir=${user.dir}/target/classes/static/assets/artist_images
app.upload.album-dir=${user.dir}/target/classes/static/assets/album_images
app.upload.playlist-dir=${user.dir}/target/classes/static/assets/playlist_images
app.audio.storage-path=${user.dir}/target/classes/static/assets/musics

# URL trả về cho client
artist_images=${app.base-url}/assets/artist_images/
playlist_images=${app.base-url}/assets/playlist_images/
musics_url=${app.base-url}/assets/musics/
images_url=${app.base-url}/assets/images/

# Ảnh mặc định
app.upload.default-image=no-image.jpg

# ===================== FILE UPLOAD =====================
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# ===================== STATIC RESOURCES MAPPING =====================
spring.web.resources.static-locations=\
  classpath:/static/,\
  classpath:/public/,\
  file:${app.audio.storage-path}/

# ===================== EMAIL CONFIG =====================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=phucnguyen220704@gmail.com
spring.mail.password=${EMAIL_APP_PASSWORD:qgrx yzsj zmzg shfo}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# ===================== PAYPAL CONFIG =====================
paypal.mode=sandbox
paypal.posturl=https://www.sandbox.paypal.com/cgi-bin/webscr
paypal.business=${PAYPAL_BUSINESS_EMAIL}
paypal.client-id=${PAYPAL_CLIENT_ID}
paypal.client-secret=${PAYPAL_CLIENT_SECRET}
paypal.returnurl=${app.base-url}/movie/paypal-success
paypal.cancelurl=${app.base-url}/movie/select-seats?showtimeId={showtimeId}

# ===================== JWT CONFIG =====================
jwt.secret=${JWT_SECRET:Vn0KQ0Xy0xJ1b7d2z8s9q3p5r7u9w1y2A3B4C5D6E7F8G9H0I1J2K3L4M5N6O7P8}
jwt.secret.base64=true
jwt.expiry=604800000
jwt.issuer=cinema-app
jwt.clockSkewSeconds=60

# ===================== MUSIC IMPORT =====================
music.import.platform=jamendo
music.import.jamendo.client.id=8f97b380
music.import.freesound.api.key=aBPn8mQXMWKszg8ZqpRlBzC8hnZLGXXa43zbi5ez

# ===================== AUDIO STORAGE =====================
app.audio.enable-download=true
app.audio.alternative-source=true

# ===================== REST TEMPLATE =====================
rest-template.read-timeout=30000
rest-template.connection-timeout=10000

# ===================== EXTERNAL API =====================
tmdb.api.key=bf83f909115287b8b4573867e1a1c6ce

# ===================== LOGGING (chỉ bật TRACE khi cần debug) =====================
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.orm.jdbc.bind=INFO
# Chỉ bật TRACE khi cần xem parameter (cẩn thận lộ thông tin)
# logging.level.org.hibernate.orm.jdbc.bind=TRACE

logging.level.com.example.demo.services.AudioStorageService=DEBUG
logging.level.com.example.demo.controllers.AudioController=INFO
logging.level.com.example.demo.services.MusicImportService=DEBUG